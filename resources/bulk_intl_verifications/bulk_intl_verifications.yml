post:
  operationId: bulk_intl_verifications

  summary: Bulk Verify

  description: >-
    Verify a list of international (except US or US territories) address _with a live
    API key_. Requests to this endpoint with a test API key will return a dummy
    response based on the primary line you input.

  tags:
    - Intl Verifications

  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: "models/intl_verifications_payload.yml"
        example:
          addresses:
            - recipient: "John Doe"
              primary_line: "370 Water St"
              secondary_line: ""
              city: "Summerside"
              state: "Prince Edwards Island"
              postal_code: "C1N 1C4"
              country: "CA"
            - recipient: "Jane Doe"
              primary_line: "UL. DOLSKAYA 1"
              secondary_line: ""
              city: "MOSCOW"
              state: "MOSCOW G"
              postal_code: "115569"
              country: "RU"

      # application/x-www-form-urlencoded excluded b/c
      # openapi can't handle arrays in objects

      multipart/form-data:
        schema:
          $ref: "models/intl_verifications_payload.yml"
        example:
          addresses:
            - recipient: "John Doe"
              primary_line: "370 Water St"
              secondary_line: ""
              city: "Summerside"
              state: "Prince Edwards Island"
              postal_code: "C1N 1C4"
              country: "CA"
            - recipient: "Jane Doe"
              primary_line: "UL. DOLSKAYA 1"
              secondary_line: ""
              city: "MOSCOW"
              state: "MOSCOW G"
              postal_code: "115569"
              country: "RU"

  responses:
    "200":
      $ref: responses/bulk_intl_verifications.yml

    default:
      $ref: "../../shared/responses/intl_verifications_error.yml"
