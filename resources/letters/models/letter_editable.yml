allOf:
  - $ref: "letter_base.yml"
  - $ref: "../../../shared/models/form_factor/input_to.yml"
  - $ref: "../../../shared/models/form_factor/input_from.yml"

  - type: object

    required:
      - to
      - from
      - file

    properties:
      file:
        description: >-
          Notes:

          - HTML merge variables should not include delimiting whitespace.

          - All pages of a supplied PDF file must be sized at 8.5"x11",
          while supplied HTML will be rendered and trimmed to as many 8.5"x11" pages
          as necessary.

          - For design specifications, please see our
          [PDF](https://s3-us-west-2.amazonaws.com/public.lob.com/assets/templates/letter_template.pdf)
          and [HTML](#section/HTML-Examples) templates.

          - If a `custom_envelope` is used, follow
          [this template](https://s3-us-west-2.amazonaws.com/public.lob.com/assets/templates/letter_custom_envelope.pdf).

          - For domestic destinations, the file limit is 60 pages single-sided or 120
          pages double-sided. For international destinations, the file limit is 6
          pages single-sided or 12 pages double-sided. PDFs that surpass the file
          limit will error, while HTML that renders more pages than the file limit
          will be trimmed.

          - Any letters over 6
          pages single-sided or 12 pages double-sided will be placed in a
          [flat envelope](https://s3-us-west-2.amazonaws.com/public.lob.com/assets/templates/letter_flat_template.pdf) instead of the standard double window envelope.


          See [pricing](https://lob.com/pricing/print-mail#compare) for extra costs incurred.

        oneOf:
          - $ref: "../../../shared/attributes/html_string.yml"
          - $ref: "../../../shared/attributes/model_ids/tmpl_id.yml"
          - $ref: "../../../shared/attributes/remote_file_url.yml"
          - type: string
            pattern: "^(?!https://)[a-zA-Z0-9@:%._+~#=/]{1,256}.(html?|pdf)$"

      extra_service:
        type: string
        nullable: true
        enum:
          - certified
          - certified_return_receipt
          - registered
          - null
        description: |
          Add an extra service to your letter. See [pricing](https://www.lob.com/pricing/print-mail#compare) for extra costs incurred.
            * `certified` - track and confirm delivery for domestic destinations. An extra sheet (1 PDF page single-sided or 2 PDF pages double-sided) is added to the beginning of your letter for address and barcode information. See here for templates: [#10 envelope](https://s3-us-west-2.amazonaws.com/public.lob.com/assets/templates/letter_certified_template.pdf) and [flat envelope](https://s3-us-west-2.amazonaws.com/public.lob.com/assets/templates/letter_certified_flat_template.pdf) (used for letters over 6 pages single-sided or 12 pages double-sided). You will not be charged for this extra sheet.
            * `certified_return_receipt` - request an electronic copy of the recipient's signature to prove delivery of your certified letter
            * `registered` - provides tracking and confirmation for international addresses

      billing_group_id:
        $ref: "../../../shared/attributes/billing_group_id.yml"
